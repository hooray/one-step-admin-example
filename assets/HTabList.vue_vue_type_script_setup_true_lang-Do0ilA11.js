
/**
 * 由 One-step-admin 提供技术支持
 * Powered by One-step-admin
 * https://one-step-admin.hurui.me
 */
    
import{f as w,U as L,aA as H,ag as c,e as P,ah as G,ak as X,ai as Y,p as x,aB as F,ac as q,v as R,al as V,am as Z,F as W,af as ee,ae as te,a8 as K,aC as _,an as h,aD as C,aE as ae,aF as le,aG as A,aH as y,m as U,n as ne,o as O,h as N,w as M,a as re,u as B,c as ue,g as se,d as oe,q as ie,y as de,b as ce,t as ve,_ as pe}from"./index-Bjt32GzP.js";function z(e,s){if(e)return e;let r=s??"button";if(typeof r=="string"&&r.toLowerCase()==="button")return"button"}function fe(e,s){let r=w(z(e.value.type,e.value.as));return L(()=>{r.value=z(e.value.type,e.value.as)}),H(()=>{var v;r.value||c(s)&&c(s)instanceof HTMLButtonElement&&!((v=c(s))!=null&&v.hasAttribute("type"))&&(r.value="button")}),r}let me=P({props:{onFocus:{type:Function,required:!0}},setup(e){let s=w(!0);return()=>s.value?G(Y,{as:"button",type:"button",features:X.Focusable,onFocus(r){r.preventDefault();let v,f=50;function o(){var l;if(f--<=0){v&&cancelAnimationFrame(v);return}if((l=e.onFocus)!=null&&l.call(e)){s.value=!1,cancelAnimationFrame(v);return}v=requestAnimationFrame(o)}v=requestAnimationFrame(o)}}):null}});var be=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(be||{}),xe=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(xe||{});let J=Symbol("TabsContext");function j(e){let s=K(J,null);if(s===null){let r=new Error(`<${e} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,j),r}return s}let Q=Symbol("TabsSSRContext"),ge=P({name:"TabGroup",emits:{change:e=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:s,attrs:r,emit:v}){var f;let o=w((f=e.selectedIndex)!=null?f:e.defaultIndex),l=w([]),n=w([]),I=x(()=>e.selectedIndex!==null),S=x(()=>I.value?e.selectedIndex:o.value);function g(a){var u;let d=F(i.tabs.value,c),t=F(i.panels.value,c),p=d.filter(m=>{var b;return!((b=c(m))!=null&&b.hasAttribute("disabled"))});if(a<0||a>d.length-1){let m=_(o.value===null?0:Math.sign(a-o.value),{[-1]:()=>1,0:()=>_(Math.sign(a),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),b=_(m,{0:()=>d.indexOf(p[0]),1:()=>d.indexOf(p[p.length-1])});b!==-1&&(o.value=b),i.tabs.value=d,i.panels.value=t}else{let m=d.slice(0,a),b=[...d.slice(a),...m].find(D=>p.includes(D));if(!b)return;let T=(u=d.indexOf(b))!=null?u:i.selectedIndex.value;T===-1&&(T=i.selectedIndex.value),o.value=T,i.tabs.value=d,i.panels.value=t}}let i={selectedIndex:x(()=>{var a,u;return(u=(a=o.value)!=null?a:e.defaultIndex)!=null?u:null}),orientation:x(()=>e.vertical?"vertical":"horizontal"),activation:x(()=>e.manual?"manual":"auto"),tabs:l,panels:n,setSelectedIndex(a){S.value!==a&&v("change",a),I.value||g(a)},registerTab(a){var u;if(l.value.includes(a))return;let d=l.value[o.value];if(l.value.push(a),l.value=F(l.value,c),!I.value){let t=(u=l.value.indexOf(d))!=null?u:o.value;t!==-1&&(o.value=t)}},unregisterTab(a){let u=l.value.indexOf(a);u!==-1&&l.value.splice(u,1)},registerPanel(a){n.value.includes(a)||(n.value.push(a),n.value=F(n.value,c))},unregisterPanel(a){let u=n.value.indexOf(a);u!==-1&&n.value.splice(u,1)}};q(J,i);let k=w({tabs:[],panels:[]}),$=w(!1);L(()=>{$.value=!0}),q(Q,x(()=>$.value?null:k.value));let E=x(()=>e.selectedIndex);return L(()=>{R([E],()=>{var a;return g((a=e.selectedIndex)!=null?a:e.defaultIndex)},{immediate:!0})}),H(()=>{if(!I.value||S.value==null||i.tabs.value.length<=0)return;let a=F(i.tabs.value,c);a.some((u,d)=>c(i.tabs.value[d])!==c(u))&&i.setSelectedIndex(a.findIndex(u=>c(u)===c(i.tabs.value[S.value])))}),()=>{let a={selectedIndex:o.value};return G(W,[l.value.length<=0&&G(me,{onFocus:()=>{for(let u of l.value){let d=c(u);if((d==null?void 0:d.tabIndex)===0)return d.focus(),!0}return!1}}),V({theirProps:{...r,...Z(e,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:a,slots:s,attrs:r,name:"TabGroup"})])}}}),he=P({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:s,slots:r}){let v=j("TabList");return()=>{let f={selectedIndex:v.selectedIndex.value},o={role:"tablist","aria-orientation":v.orientation.value};return V({ourProps:o,theirProps:e,slot:f,attrs:s,slots:r,name:"TabList"})}}}),ye=P({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:s,slots:r,expose:v}){var f;let o=(f=e.id)!=null?f:`headlessui-tabs-tab-${ee()}`,l=j("Tab"),n=w(null);v({el:n,$el:n}),L(()=>l.registerTab(n)),te(()=>l.unregisterTab(n));let I=K(Q),S=x(()=>{if(I.value){let t=I.value.tabs.indexOf(o);return t===-1?I.value.tabs.push(o)-1:t}return-1}),g=x(()=>{let t=l.tabs.value.indexOf(n);return t===-1?S.value:t}),i=x(()=>g.value===l.selectedIndex.value);function k(t){var p;let m=t();if(m===C.Success&&l.activation.value==="auto"){let b=(p=le(n))==null?void 0:p.activeElement,T=l.tabs.value.findIndex(D=>c(D)===b);T!==-1&&l.setSelectedIndex(T)}return m}function $(t){let p=l.tabs.value.map(m=>c(m)).filter(Boolean);if(t.key===h.Space||t.key===h.Enter){t.preventDefault(),t.stopPropagation(),l.setSelectedIndex(g.value);return}switch(t.key){case h.Home:case h.PageUp:return t.preventDefault(),t.stopPropagation(),k(()=>A(p,y.First));case h.End:case h.PageDown:return t.preventDefault(),t.stopPropagation(),k(()=>A(p,y.Last))}if(k(()=>_(l.orientation.value,{vertical(){return t.key===h.ArrowUp?A(p,y.Previous|y.WrapAround):t.key===h.ArrowDown?A(p,y.Next|y.WrapAround):C.Error},horizontal(){return t.key===h.ArrowLeft?A(p,y.Previous|y.WrapAround):t.key===h.ArrowRight?A(p,y.Next|y.WrapAround):C.Error}}))===C.Success)return t.preventDefault()}let E=w(!1);function a(){var t;E.value||(E.value=!0,!e.disabled&&((t=c(n))==null||t.focus({preventScroll:!0}),l.setSelectedIndex(g.value),ae(()=>{E.value=!1})))}function u(t){t.preventDefault()}let d=fe(x(()=>({as:e.as,type:s.type})),n);return()=>{var t,p;let m={selected:i.value,disabled:(t=e.disabled)!=null?t:!1},{...b}=e,T={ref:n,onKeydown:$,onMousedown:u,onClick:a,id:o,role:"tab",type:d.value,"aria-controls":(p=c(l.panels.value[g.value]))==null?void 0:p.id,"aria-selected":i.value,tabIndex:i.value?0:-1,disabled:e.disabled?!0:void 0};return V({ourProps:T,theirProps:b,slot:m,attrs:s,slots:r,name:"Tab"})}}});const we=P({__name:"HTabList",props:U({options:{}},{modelValue:{},modelModifiers:{}}),emits:U(["change"],["update:modelValue"]),setup(e,{emit:s}){const r=e,v=s,f=ne(e,"modelValue"),o=x({get(){return r.options.findIndex(n=>n.value===f.value)},set(n){f.value=r.options[n].value}});R(f,n=>{n&&v("change",n)});function l(n){f.value=r.options[n].value}return(n,I)=>{const S=pe;return O(),N(B(ge),{"selected-index":B(o),onChange:l},{default:M(()=>[re(B(he),{class:"inline-flex select-none items-center justify-center rounded-md bg-stone-1 p-1 ring-1 ring-stone-2 dark-bg-stone-9 dark-ring-stone-8"},{default:M(()=>[(O(!0),ue(W,null,se(n.options,(g,i)=>(O(),N(B(ye),{key:i,as:"template"},{default:M(({selected:k})=>[oe("button",{class:ie(["w-full inline-flex items-center justify-center gap-1 whitespace-nowrap border-size-0 rounded-md bg-inherit px-2 py-1.5 text-sm text-dark ring-stone-2 ring-inset dark-text-white focus-outline-none focus-ring-2 dark-ring-stone-8",{"cursor-default bg-white dark-bg-dark-9":k,"cursor-pointer opacity-50 hover-opacity-100":!k}])},[g.icon?(O(),N(S,{key:0,name:g.icon,class:"flex-shrink-0"},null,8,["name"])):de("",!0),ce(" "+ve(g.label),1)],2)]),_:2},1024))),128))]),_:1})]),_:1},8,["selected-index"])}}});export{we as _,fe as s};
