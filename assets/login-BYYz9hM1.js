
/**
 * 由 One-step-admin 提供技术支持
 * Powered by One-step-admin
 * https://one-step-admin.hurui.me
 */
    
import{e as F,f as _,D as U,r as m,o as b,h as I,w as l,d as u,a as t,u as o,b as f,Q as q,E as T,_ as S,I as K,i as j,c as $,F as z,t as G,R as H,y as N,T as Q,N as X,O as J}from"./index-Bjt32GzP.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as W}from"./HTabList.vue_vue_type_script_setup_true_lang-Do0ilA11.js";import{i as Y}from"./logo-NdH2FlYi.js";import{C as h}from"./index-au3p-u-w.js";const ee={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},oe=F({name:"ResetPasswordForm",__name:"index",props:{account:{}},emits:["onLogin","onResetPassword"],setup(V,{emit:E}){const k=V,v=E,y=_(!1),p=U("formRef"),s=_({account:k.account??localStorage.login_account??"",captcha:"",newPassword:""}),w=_({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],newPassword:[{required:!0,trigger:"blur",message:"请输入新密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]});function i(){var r;T({message:"重置密码仅提供界面演示，无实际功能，需开发者自行扩展",type:"info"}),(r=p.value)==null||r.validate(e=>{e&&v("onResetPassword",s.value.account)})}return(r,e)=>{const c=S,a=m("ElInput"),g=m("ElFormItem"),n=m("ElButton"),L=m("ElLink"),R=m("ElForm");return b(),I(R,{ref_key:"formRef",ref:p,model:o(s),rules:o(w),class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:l(()=>[e[7]||(e[7]=u("h3",{class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"}," 忘记密码了? 🔒 ",-1)),u("div",null,[t(g,{prop:"account"},{default:l(()=>[t(a,{modelValue:o(s).account,"onUpdate:modelValue":e[0]||(e[0]=d=>o(s).account=d),placeholder:"用户名",type:"text",tabindex:"1"},{prefix:l(()=>[t(c,{name:"i-ri:user-3-fill"})]),_:1},8,["modelValue"])]),_:1}),t(g,{prop:"captcha"},{default:l(()=>[t(a,{modelValue:o(s).captcha,"onUpdate:modelValue":e[1]||(e[1]=d=>o(s).captcha=d),placeholder:"验证码",type:"text",tabindex:"2"},{prefix:l(()=>[t(c,{name:"i-ic:baseline-verified-user"})]),append:l(()=>[t(n,null,{default:l(()=>e[4]||(e[4]=[f("发送验证码")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(g,{prop:"newPassword"},{default:l(()=>[t(a,{modelValue:o(s).newPassword,"onUpdate:modelValue":e[2]||(e[2]=d=>o(s).newPassword=d),type:"password",placeholder:"新密码",tabindex:"3","show-password":""},{prefix:l(()=>[t(c,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue"])]),_:1})]),t(n,{loading:o(y),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:q(i,["prevent"])},{default:l(()=>e[5]||(e[5]=[f(" 确认 ")])),_:1},8,["loading"]),u("div",ee,[t(L,{type:"primary",underline:!1,onClick:e[3]||(e[3]=d=>v("onLogin",o(s).account))},{default:l(()=>e[6]||(e[6]=[f(" 去登录 ")])),_:1})])]),_:1},8,["model","rules"])}}}),te=P(oe,[["__scopeId","data-v-d86073c3"]]),ne={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},le=F({name:"RegisterForm",__name:"index",props:{account:{}},emits:["onLogin","onRegister"],setup(V,{emit:E}){const k=V,v=E,y=_(!1),p=U("formRef"),s=_({account:k.account??"",captcha:"",password:"",checkPassword:""}),w=_({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:()=>"请输入验证码"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkPassword:[{required:!0,trigger:"blur",message:"请再次输入密码"},{validator:(r,e,c)=>{e!==s.value.password?c(new Error("两次输入的密码不一致")):c()}}]});function i(){var r;T({message:"注册模块仅提供界面演示，无实际功能，需开发者自行扩展",type:"warning"}),(r=p.value)==null||r.validate(e=>{e&&v("onRegister",s.value.account)})}return(r,e)=>{const c=S,a=m("ElInput"),g=m("ElFormItem"),n=m("ElButton"),L=m("ElLink"),R=m("ElForm");return b(),I(R,{ref_key:"formRef",ref:p,model:o(s),rules:o(w),class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:l(()=>[e[9]||(e[9]=u("h3",{class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"}," 探索从这里开始! 🚀 ",-1)),u("div",null,[t(g,{prop:"account"},{default:l(()=>[t(a,{modelValue:o(s).account,"onUpdate:modelValue":e[0]||(e[0]=d=>o(s).account=d),placeholder:"用户名",tabindex:"1"},{prefix:l(()=>[t(c,{name:"i-ri:user-3-fill"})]),_:1},8,["modelValue"])]),_:1}),t(g,{prop:"captcha"},{default:l(()=>[t(a,{modelValue:o(s).captcha,"onUpdate:modelValue":e[1]||(e[1]=d=>o(s).captcha=d),placeholder:"验证码",tabindex:"2"},{prefix:l(()=>[t(c,{name:"i-ic:baseline-verified-user"})]),append:l(()=>[t(n,null,{default:l(()=>e[5]||(e[5]=[f("发送验证码")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(g,{prop:"password"},{default:l(()=>[t(a,{modelValue:o(s).password,"onUpdate:modelValue":e[2]||(e[2]=d=>o(s).password=d),type:"password",placeholder:"密码",tabindex:"3","show-password":""},{prefix:l(()=>[t(c,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue"])]),_:1}),t(g,{prop:"checkPassword"},{default:l(()=>[t(a,{modelValue:o(s).checkPassword,"onUpdate:modelValue":e[3]||(e[3]=d=>o(s).checkPassword=d),type:"password",placeholder:"确认密码",tabindex:"4","show-password":""},{prefix:l(()=>[t(c,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue"])]),_:1})]),t(n,{loading:o(y),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:q(i,["prevent"])},{default:l(()=>e[6]||(e[6]=[f(" 注册 ")])),_:1},8,["loading"]),u("div",ne,[e[8]||(e[8]=f(" 已经有帐号? ")),t(L,{type:"primary",underline:!1,onClick:e[4]||(e[4]=d=>v("onLogin",o(s).account))},{default:l(()=>e[7]||(e[7]=[f(" 去登录 ")])),_:1})])]),_:1},8,["model","rules"])}}}),se=P(le,[["__scopeId","data-v-1d932a70"]]),re={class:"mb-6"},ae={class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"},ie={class:"mb-4 flex-center-between"},ue={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},de={key:1,class:"flex-col-center"},me={class:"mt-4 text-center -mb-4"},pe=F({name:"LoginForm",__name:"index",props:{account:{}},emits:["onLogin","onRegister","onResetPassword"],setup(V,{emit:E}){const k=V,v=E,y=K(),p="One-step-admin 基础版",s=_(!1),w=_("default"),i=U("formRef"),r=_({account:k.account??localStorage.login_account??"",password:"",remember:!!localStorage.login_account}),e=_({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]});function c(){var g;(g=i.value)==null||g.validate(n=>{n&&(s.value=!0,y.login(r.value).then(()=>{r.value.remember?localStorage.setItem("login_account",r.value.account):localStorage.removeItem("login_account"),v("onLogin",r.value.account)}).finally(()=>{s.value=!1}))})}function a(g){r.value.account=g,r.value.password="123456",c()}return(g,n)=>{const L=W,R=S,d=m("ElInput"),B=m("ElFormItem"),D=m("ElCheckbox"),O=m("ElLink"),C=m("ElButton"),M=m("el-image"),Z=m("ElDivider"),A=m("ElForm");return b(),I(A,{ref_key:"formRef",ref:i,model:o(r),rules:o(e),class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:l(()=>[u("div",re,[t(L,{modelValue:o(w),"onUpdate:modelValue":n[0]||(n[0]=x=>j(w)?w.value=x:null),options:[{label:"账号密码登录",value:"default"},{label:"扫码登录",value:"qrcode"}]},null,8,["modelValue"])]),o(w)==="default"?(b(),$(z,{key:0},[u("h3",ae," 欢迎使用 "+G(o(p))+" ! 👋🏻 ",1),u("div",null,[t(B,{prop:"account"},{default:l(()=>[t(d,{modelValue:o(r).account,"onUpdate:modelValue":n[1]||(n[1]=x=>o(r).account=x),placeholder:"用户名",type:"text",tabindex:"1"},{prefix:l(()=>[t(R,{name:"i-ri:user-3-fill"})]),_:1},8,["modelValue"])]),_:1}),t(B,{prop:"password"},{default:l(()=>[t(d,{modelValue:o(r).password,"onUpdate:modelValue":n[2]||(n[2]=x=>o(r).password=x),type:"password",placeholder:"密码",tabindex:"2","show-password":"",onKeyup:H(c,["enter"])},{prefix:l(()=>[t(R,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue"])]),_:1})]),u("div",ie,[t(D,{modelValue:o(r).remember,"onUpdate:modelValue":n[3]||(n[3]=x=>o(r).remember=x)},{default:l(()=>n[8]||(n[8]=[f(" 记住我 ")])),_:1},8,["modelValue"]),t(O,{type:"primary",underline:!1,onClick:n[4]||(n[4]=x=>v("onResetPassword",o(r).account))},{default:l(()=>n[9]||(n[9]=[f(" 忘记密码了? ")])),_:1})]),t(C,{loading:o(s),type:"primary",size:"large",style:{width:"100%"},onClick:q(c,["prevent"])},{default:l(()=>n[10]||(n[10]=[f(" 登录 ")])),_:1},8,["loading"]),u("div",ue,[n[12]||(n[12]=f(" 还没有帐号? ")),t(O,{type:"primary",underline:!1,onClick:n[5]||(n[5]=x=>v("onRegister",o(r).account))},{default:l(()=>n[11]||(n[11]=[f(" 创建新帐号 ")])),_:1})])],64)):o(w)==="qrcode"?(b(),$("div",de,[t(M,{src:"https://s2.loli.net/2024/04/26/GsahtuIZ9XOg5jr.png",class:"h-[250px] w-[250px]"}),n[13]||(n[13]=u("div",{class:"mt-2 op-50"}," 请使用微信扫码登录 ",-1))])):N("",!0),u("div",me,[t(Z,null,{default:l(()=>n[14]||(n[14]=[f("演示账号一键登录")])),_:1}),t(C,{type:"primary",size:"small",plain:"",onClick:n[6]||(n[6]=x=>a("admin"))},{default:l(()=>n[15]||(n[15]=[f(" admin ")])),_:1}),t(C,{size:"small",plain:"",onClick:n[7]||(n[7]=x=>a("test"))},{default:l(()=>n[16]||(n[16]=[f(" test ")])),_:1})])]),_:1},8,["model","rules"])}}}),ce=P(pe,[["__scopeId","data-v-3d32c589"]]),fe=""+new URL("login-banner-ZfMZACb6.png",import.meta.url).href,ge={class:"login-box"},_e={class:"login-form flex-col-center"},ve=F({name:"Login",__name:"login",setup(V){var s;const E=X(),k=J(),v=_(((s=E.query.redirect)==null?void 0:s.toString())??"/"),y=_(),p=_("login");return(w,i)=>{const r=ce,e=se,c=te;return b(),$(z,null,[i[8]||(i[8]=u("div",{class:"bg-banner"},null,-1)),u("div",ge,[i[7]||(i[7]=u("div",{class:"login-banner"},[u("img",{src:Y,class:"absolute left-4 top-4 h-30px rounded ring ring-stone-2 dark-ring-stone-8"}),u("img",{src:fe,class:"banner"})],-1)),u("div",_e,[t(Q,{name:"fade",mode:"out-in"},{default:l(()=>[o(p)==="login"?(b(),I(r,{key:0,account:o(y),onOnLogin:i[0]||(i[0]=a=>o(k).push(o(v))),onOnRegister:i[1]||(i[1]=a=>{p.value="register",a=a}),onOnResetPassword:i[2]||(i[2]=a=>{p.value="resetPassword",a=a})},null,8,["account"])):o(p)==="register"?(b(),I(e,{key:1,account:o(y),onOnRegister:i[3]||(i[3]=a=>{p.value="login",a=a}),onOnLogin:i[4]||(i[4]=a=>p.value="login")},null,8,["account"])):o(p)==="resetPassword"?(b(),I(c,{key:2,account:o(y),onOnResetPassword:i[5]||(i[5]=a=>{p.value="login",a=a}),onOnLogin:i[6]||(i[6]=a=>p.value="login")},null,8,["account"])):N("",!0)]),_:1})])]),t(h)],64)}}}),ke=P(ve,[["__scopeId","data-v-6c690d33"]]);export{ke as default};
